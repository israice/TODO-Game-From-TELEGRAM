# Auto Browser

Telegram-бот для автоматизации рутинных действий в браузере через Playwright.

## 📋 Описание

Проект предоставляет интерфейс для управления задачами в TODO-приложении через Telegram. Бот принимает команды от пользователя, запускает браузерные скрипты и выполняет действия автоматически.

## 🔧 Возможности

| Действие | Описание |
|----------|----------|
| 📝 Добавить задание | Создание новой задачи с указанным текстом |
| 🗑️ Удалить задание | Удаление задачи по номеру из списка |
| ✏️ Переименовать | Изменение названия задачи |
| ✅ Выполнить | Отметка задачи как выполненной |

## 🚀 Как это работает

```
┌─────────────────────────────────────────────────────────┐
│  Telegram Bot (run.js)                                  │
│  • Принимает команды от пользователя                    │
│  • Управляет сессиями (состояние пользователя)          │
│  • Запускает браузерные скрипты                         │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│  Playwright Scripts (auto_TODO/*.js)                    │
│  • get_tasks.js — получение списка задач                │
│  • add_task.js — добавление задачи                      │
│  • delete_task.js — удаление задачи                     │
│  • rename_task.js — переименование задачи               │
│  • complete_task.js — завершение задачи                 │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│  Веб-приложение (todo.weforks.org)                      │
│  • Автоматизация через браузер Chromium                 │
│  • Эмуляция действий пользователя                       │
└─────────────────────────────────────────────────────────┘
```

## 📦 Установка

1. **Клонируйте репозиторий:**
   ```bash
   git clone <repository-url>
   cd auto-browser
   ```

2. **Установите зависимости:**
   ```bash
   npm install
   ```

3. **Настройте переменные окружения:**
   ```bash
   # Скопируйте пример
   copy .env.example .env
   
   # Отредактируйте .env и укажите:
   TELEGRAM_BOT_TOKEN=ваш_токен_бота
   TODO_USERNAME=логин_todo
   TODO_PASSWORD=пароль_todo
   ```

4. **Установите браузеры Playwright:**
   ```bash
   npx playwright install chromium
   ```

## ▶️ Запуск

```bash
node run.js
```

После запуска бот будет ожидать команды в Telegram.

## 📱 Использование в Telegram

1. **Запуск бота:** Отправьте `/start`
2. **Выберите действие** из меню кнопок
3. **Следуйте инструкциям** бота:
   - Для **добавления** — введите текст задачи
   - Для **удаления/выполнения** — выберите номер из списка
   - Для **переименования** — введите номер, затем новое имя

### Пример диалога

```
Вы: /start
Бот: Выберите действие: [📝] [🗑️] [✏️] [✅]

Вы: [нажали 🗑️ Удалить задание]
Бот: 📋 Загружаю список задач...
Бот: 📝 Ваши задачи:
     1. Купить молоко
     2. Выгулять собаку
     3. Сделать уборку
     
     Введите номер:

Вы: 2
Бот: ✅ Выполняю...
Бот: ✅ Готово!
```

## 📁 Структура проекта

```
auto-browser/
├── run.js                          # Главный файл бота
├── telegram/
│   ├── telegram_config.js          # Конфигурация бота
│   ├── telegram_text.js            # Данные от пользователя (авто)
│   └── telegram_tasks.js           # Список задач (авто)
├── auto_TODO/
│   ├── get_tasks.js                # Получение списка задач
│   ├── add_task.js                 # Добавление задачи
│   ├── delete_task.js              # Удаление задачи
│   ├── rename_task.js              # Переименование задачи
│   ├── complete_task.js            # Завершение задачи
│   └── *_config.js                 # Конфигурации скриптов
├── .env                            # Переменные окружения
└── package.json                    # Зависимости
```

## ⚙️ Конфигурация

### telegram_config.js

```javascript
module.exports = {
  buttons: { ... },      // Названия кнопок
  actions: { ... },      // Внутренние имена действий
  messages: { ... },     // Сообщения бота
  paths: { ... }         // Пути к файлам
};
```

### auto_TODO/*_config.js

Каждый скрипт имеет свой конфиг с настройками:
- `headless` — скрытый режим браузера
- `loginUrl` — URL для входа
- `delays` — задержки между действиями
- Селекторы элементов

## 🔍 Отладка

Включите подробное логирование в консоли:
- Сессии пользователей
- Загруженные списки задач
- Результаты выполнения скриптов

## 📝 Зависимости

- [telegraf](https://telegraf.js.org/) — фреймворк для Telegram-ботов
- [playwright](https://playwright.dev/) — автоматизация браузера
- [dotenv](https://github.com/motdotla/dotenv) — управление переменными окружения

## ⚠️ Примечания

- Бот работает только с одним пользователем одновременно (сессии в памяти)
- Для работы требуется запущенный Node.js процесс
- Браузер открывается в видимом режиме (`headless: false` по умолчанию)

## 📄 Лицензия

MIT
